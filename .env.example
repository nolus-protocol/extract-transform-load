# =============================================================================
# Nolus ETL Service Configuration
# =============================================================================

# -----------------------------------------------------------------------------
# Network Configuration
# -----------------------------------------------------------------------------
HOST=rpc.nolus.network
GRPC_HOST=https://grpc.nolus.network

# -----------------------------------------------------------------------------
# Database Configuration
# -----------------------------------------------------------------------------
DATABASE_URL=postgres://user_name:password@localhost:5432/database_name

# Database pool settings (optimized for PgBouncer transaction mode)
# DB_MAX_CONNECTIONS=5       # Max pool connections (default: 5, keep low with PgBouncer)
# DB_MIN_CONNECTIONS=1       # Min pool connections (default: 1)
# DB_ACQUIRE_TIMEOUT=30      # Connection acquire timeout in seconds (default: 30)
# DB_IDLE_TIMEOUT=300        # Idle connection timeout in seconds (default: 300)
# DB_STATEMENT_TIMEOUT=60    # Query timeout in seconds (default: 60, kills queries exceeding this)

# -----------------------------------------------------------------------------
# Dynamic Configuration (Bootstrap)
# -----------------------------------------------------------------------------
# The ADMIN_CONTRACT is the only required contract address.
# All other configuration (protocols, currencies, pools, treasury) is
# automatically discovered from this contract at startup.
ADMIN_CONTRACT=nolus1gurgpv8savnfw66lckwzn4zk7fp394lpe667dhu7aw48u40lj6jsqxf8nd

# Optional: List of protocol names to ignore (comma-separated)
# Protocols in this list will be skipped during discovery
# IGNORE_PROTOCOLS=OSMOSIS-OSMOSIS-INJ,NEUTRON-ASTROPORT-USDC_AXELAR
IGNORE_PROTOCOLS=

# -----------------------------------------------------------------------------
# Sync and Processing Configuration
# -----------------------------------------------------------------------------
SYNC_THREADS=32
AGGREGATION_INTERVAL=1
MP_ASSET_INTERVAL_IN_SEC=20
CACHE_INTERVAL_IN_MINUTES=60
SOCKET_RECONNECT_INTERVAL=5
EVENTS_SUBSCRIBE=deposit,burn,open_lease,repay,claim_rewards,close_position,change_close_policy
ENABLE_SYNC=true
TASKS_INTERVAL=3000

# -----------------------------------------------------------------------------
# gRPC Configuration
# -----------------------------------------------------------------------------
GRPC_CONNECTIONS=32
GRPC_PERMITS=12

# -----------------------------------------------------------------------------
# HTTP Server Configuration
# -----------------------------------------------------------------------------
SERVER_HOST=127.0.0.1
PORT=8080
ALLOWED_ORIGINS=http://localhost:8080,http://127.0.0.1:8080,https://app-dev.nolus.io,https://app.nolus.io
TIMEOUT=300
MAX_TASKS=128
STATIC_DIRECTORY=static

# -----------------------------------------------------------------------------
# Native Currency (optional)
# -----------------------------------------------------------------------------
# Used for filtering native token from certain calculations (defaults to NLS)
NATIVE_CURRENCY=NLS

# -----------------------------------------------------------------------------
# Push Notifications (see etl.conf)
# -----------------------------------------------------------------------------
# MAIL_TO and STATUS_COODE_TO_DELETE are configured in etl.conf
